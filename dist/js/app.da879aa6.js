(function(e){function t(t){for(var i,r,o=t[0],c=t[1],l=t[2],d=0,p=[];d<o.length;d++)r=o[d],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&p.push(a[r][0]),a[r]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);u&&u(t);while(p.length)p.shift()();return s.push.apply(s,l||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],i=!0,o=1;o<n.length;o++){var c=n[o];0!==a[c]&&(i=!1)}i&&(s.splice(t--,1),e=r(r.s=n[0]))}return e}var i={},a={app:0},s=[];function r(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=i,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var u=c;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},1454:function(e,t,n){},"1d8c":function(e,t,n){"use strict";var i=n("77dc"),a=n.n(i);a.a},2655:function(e,t,n){"use strict";var i=n("df98"),a=n.n(i);a.a},"38d6":function(e,t,n){"use strict";var i=n("45ba"),a=n.n(i);a.a},"3e2d":function(e,t,n){"use strict";var i=n("ed7c"),a=n.n(i);a.a},"415c":function(e,t,n){},"452c":function(e,t,n){},"45ba":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);var i=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("Menu",{staticClass:"menu",attrs:{active:e.activePage},on:{change:function(t){return e.activePage=t}}}),n("section",{staticClass:"content"},[n(e.activePage,{tag:"component"})],1),n("Sound")],1)},s=[],r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("nav",[n("h1",[e._v("Actions")]),n("ul",e._l(e.pages,(function(t){return n("li",{key:t.id,staticClass:"page-link",class:{active:t.id===e.active},on:{click:function(n){return e.$emit("change",t.id)}}},[e._v(" "+e._s(t.text)+" ")])})),0),e.presets.data.length>0?n("details",{attrs:{open:""}},[n("summary",[e._v("Presets")]),n("ul",e._l(e.presets.data,(function(t){return n("li",{key:t.id,staticClass:"preset-link",class:{active:t.id===e.presets.activePreset},on:{click:function(n){return e.presets.setActive(t.id)}}},[e._v(" "+e._s(t.name)+" ")])})),0),n("div",{staticClass:"page-link",on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.$emit("change","PresetMngt")}}},[e._v(" Manage presets ")])]):e._e()])},o=[];const c=[],l={replaceArray:!1};function u(e,...t){function n(t,n){if(n&&"object"===typeof n){const i=Array.isArray(n);let a=e[t],s=!a||"object"!==typeof a||i&&l.replaceArray||Array.isArray(a)!==i;if(s&&(a=i?[]:{}),c.includes(n))return;c.push(n),u(a,n),c.pop(),e[t]=a}else e[t]=n}return e||(e={}),t.forEach(e=>{for(let[t,i]of Object.entries(e))n(t,i)}),e}u.replaceArray=function(...e){l.replaceArray=!0;const t=u(...e);return l.replaceArray=!1,t};const d={id:"default",name:"",format:{display:"{HH}:{MM}:{SS}.{LLL}",events:[{id:"init",name:"initialisation",trigger:"reset",triggerValue:null,enabled:!0,actions:[{action:"set",value:0},{action:"increment",value:1},{action:"format",value:"{HH}:{MM}:{SS}.{LLL}"},{action:"enable",value:"*"},{action:"color",value:"black"}]}]}},p={data:[],activePreset:"",add(e,{init:t=!1}={}){let n=e.id;const i=this.data,a=!t&&this.getPreset(n);if(!n){let e=this.data.length;do{n=`preset ${e++}`}while(this.getPreset(n))}if(a)u.replaceArray(a,e);else{const t=u.replaceArray({},{name:"preset",format:d.format},e,{id:n,order:i.length});this.data.push(t)}return t||(this.data=Array.from(i.sort((e,t)=>e.order-t.order)),this.save()),n},remove(e){const t=this.data,n=t.findIndex(t=>t.id===e.id);-1!==n&&t.splice(n,1)},save(){const e=JSON.stringify(this.data);localStorage.chronoPresets=e},load(){const e=localStorage.chronoPresets;if(e)try{const t=JSON.parse(e);t.forEach(e=>{this.add(e,{init:!0})})}catch(t){console.error("Load presets failed: %s",t.message)}},getPreset(e){return this.data.find(t=>t.id===e)},setActive(e){if("string"===typeof e){const t=this.getPreset(e);if(!t)return!1;e=t.format,this.activePreset=t.id}else if("number"===typeof e){const t=this.data[e];if(!t)return!1;e=t.format,this.activePreset=t.id}else this.activePreset="";u.replaceArray(v,e)}},v=u({},d.format);p.load(),p.setActive(0);var m=p,h={name:"Menu",props:{active:String},data:()=>({pages:[{id:"Chronometer",text:"Chronometer"},{id:"ShortcutSettings",text:"Keyboard shortcuts"},{id:"TimerSettings",text:"Configure your timer"}],presets:m})},g=h,f=(n("c524"),n("2877")),b=Object(f["a"])(g,r,o,!1,null,"1c199d30",null),y=b.exports,_=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("DigitalTimer",{style:"color:"+e.color,attrs:{value:e.chrono.timestamp,timeFormat:e.currentFormat.display}}),n("footer",{staticClass:"chronometer-footer"},[n("button",{staticClass:"action-btn",attrs:{title:e.mainActionName},on:{click:e.mainAction}},[e._v(" "+e._s(e.mainActionIcon)+" ")]),n("button",{staticClass:"action-btn",attrs:{title:"Reset"},on:{click:e.reset}},[e._v(" ⏹ ")]),n("button",{staticClass:"action-btn",attrs:{title:"Record current time"},on:{click:e.record}},[e._v(" ⏺ ")])])],1)},S=[],k=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"sound-manager"},e._l(e.sounds,(function(t){return n("audio",{key:t.sound+" - "+t.uid,attrs:{autoplay:""},on:{ended:function(n){return e.removeSound(t.uid)},emptied:function(n){return e.removeSound(t.uid)},error:function(n){return e.onError(n,t.uid)}}},[n("source",{attrs:{src:t.sound,type:t.type}})])})),0)},C=[];let E=0;const P=[{desc:"Bronze bell 1",id:"bronzeBell1",path:"bronzebell1.ogg",type:"audio/ogg"},{desc:"Bronze bell 2",id:"bronzeBell2",path:"bronzebell2.ogg",type:"audio/ogg"},{desc:"Bronze bell 30",id:"bronzeBell30",path:"bronzebell30.ogg",type:"audio/ogg"},{desc:"Daitokuji bell",id:"daitokuji",path:"daitokuji-temple-bell.ogg",type:"audio/ogg"},{desc:"Cow bell",id:"cowBell",path:"cowbell.ogg",type:"audio/ogg"},{desc:"Gong",id:"gong",path:"gong.ogg",type:"audio/ogg"},{desc:"Tiny bell 1",id:"tinybell1",path:"tinybell1.ogg",type:"audio/ogg"},{desc:"Tiny bell 2",id:"tinybell2",path:"tinybell2.ogg",type:"audio/ogg"},{desc:"Tiny bell 3",id:"tinybell3",path:"tinybell3.ogg",type:"audio/ogg"},{desc:"Tiny bell 10",id:"tinybell10",path:"tinybell10.ogg",type:"audio/ogg"}],w={playSound:(...e)=>{setTimeout(()=>w.playSound(...e),0)},removeSound:(...e)=>{setTimeout(()=>w.removeSound(...e),0)}};var x={name:"Sound",data(){return{sounds:[],publicPath:"/",callbacks:new Map}},created(){w.playSound=this.playSound.bind(this),w.removeSound=this.removeSound.bind(this)},methods:{getIdx(e){return e<0?-1:this.sounds.findIndex(t=>t.uid===e)},playSound(e,t){if("string"===typeof e){const n=P.find(t=>t.id===e),i=E++;return this.sounds.push({uid:i,sound:`${this.publicPath}${n.path}`,type:n.type}),"function"===typeof t&&this.callbacks.set(i,t),i}return-1},removeSound(e=-1,t=!1){const n=this.getIdx(e),i=this.callbacks;n>=0?(this.sounds.splice(n,1),!t&&i.has(e)&&i.get(e)(e),i.delete(e)):(this.sounds.splice(0),t||i.forEach((e,t)=>e(t)),i.clear())},onError(e,t){this.removeSound(t)}}},T=x,N=(n("f9e8"),Object(f["a"])(T,k,C,!1,null,"35c62a6d",null)),O=N.exports;const A=[];var D={computed:{resetEvent(){return this.currentFormat.events.find(e=>"init"===e.id)},reachEvents(){return this.currentFormat.events.filter(e=>e.enabled&&"reach"===e.trigger)}},methods:{actionReset(){this.lastTs=void 0,this.resetEvent.enabled=!0,this.trigger("reset")},triggerEvent(e){const t=e.actions;t.forEach(t=>this.doAction(t,e))},trigger(e){const t=this.currentFormat.events.filter(t=>t.enabled&&t.trigger===e&&!A.includes(t));t.forEach(e=>this.triggerEvent(e))},triggerFrom(e,t){e!==t.trigger&&(A.push(t),this.trigger(e),A.pop())},getEvent(e,t){return e&&"this"!==e?this.currentFormat.events.find(t=>t.id===e):t},enableEvent(e,t,n){if("*"===e)return void this.currentFormat.events.forEach(e=>e.enabled=t);const i=this.getEvent(e,n);i&&(i.enabled=t)},runEvent(e,t){if(A.push(t),"*"===e)this.currentFormat.events.forEach(e=>{A.includes(e)||this.triggerEvent(e)});else{const n=this.getEvent(e,t);A.includes(n)||this.triggerEvent(n)}A.pop()},changeFormat(e){this.currentFormat.display=e},doAction({action:e,value:t},n){switch(e){case"stop":this.chrono.stop(),"reach"===n.trigger&&this.chrono.reset(+n.triggerValue),this.triggerFrom("stop",n);break;case"start":this.chrono.start(),this.triggerFrom("start",n);break;case"set":this.chrono.reset(+t);break;case"color":this.color=t||"black";break;case"increment":this.chrono.changeIncrement(t);break;case"enable":this.enableEvent(t,!0,n);break;case"disable":this.enableEvent(t,!1,n);break;case"addTime":t=+t||0,this.chrono.reset(t+this.chrono.timestamp);break;case"runEvent":this.runEvent(t,n);break;case"format":this.changeFormat(t);break;case"sound":w.playSound(t);break;case"none":break;default:console.warn('Action "%s" is not implemented yet.')}},checkTriggers(){const e=this.reachEvents;if(e.length){const t=this.lastTs,n=this.chrono.timestamp;if("number"===typeof t){const i=Math.min(t,n),a=Math.max(t,n);e.forEach(e=>{const t=+e.triggerValue;t>i&&t<=a&&this.triggerEvent(e)})}this.lastTs=n}}},watch:{"chrono.timestamp":function(){this.checkTriggers()}}};const F=localStorage.chronoShortcut,L=Object.assign({START:"Space",STOP:"Space",RESET:"Escape",STOP_RESET:"Escape",RECORD:"Enter",Special1:"F1",Special2:"F2",Special3:"F3",Special4:"F4",Special5:"F5"},F&&JSON.parse(F)||{}),$={START:"Start chronometer",RESET:"Reset chronometer",STOP:"Stop chronometer",RECORD:"Record timer",STOP_RESET:"Stop and Reset chronometer",Special1:"Special action 1",Special2:"Special action 2",Special3:"Special action 3",Special4:"Special action 4",Special5:"Special action 5"},R=["STOP","RECORD","STOP_RESET"],j=["START","RESET"],I=["Special1","Special2","Special3","Special4","Special5"];function V(e,t){L[e]&&t&&(L[e]=t,localStorage.chronoShortcut=JSON.stringify(L))}var K=L,M={computed:{upCodes(){let e=I;return this.isCounting&&(e=R.concat(e)),e.map(e=>K[e])},downCodes(){let e=j;return e.map(e=>K[e])}},methods:{prevent(e){e.preventDefault(),e.stopPropagation()},manageRunningKey(e){if(e.repeat)return;const t=e.code;if(this.upCodes.includes(t)){switch(this.prevent(e),t){case K.STOP:this.stop();break;case K.RECORD:this.record();break;case K.STOP_RESET:this.reset();break;case K.Special1:this.trigger("Special1");break;case K.Special2:this.trigger("Special2");break;case K.Special3:this.trigger("Special3");break;case K.Special4:this.trigger("Special4");break;case K.Special5:this.trigger("Special5");break;default:}this.lockKey=!0}},manageSleepingKey(e){if(e.repeat||this.isCounting)return;if(this.lockKey)return void(this.lockKey=!1);const t=e.code;if(this.downCodes.includes(t))switch(this.prevent(e),t){case K.START:this.start();break;case K.RESET:this.reset();break;default:}},startListeners(){document.body.addEventListener("keydown",this.manageRunningKey),document.body.addEventListener("keyup",this.manageSleepingKey),document.body.addEventListener("keypress",this.prevent)},removeListeners(){document.body.removeEventListener("keydown",this.manageRunningKey),document.body.removeEventListener("keyup",this.manageSleepingKey),document.body.removeEventListener("keypress",this.prevent)}},created(){this.startListeners()},destroyed(){this.removeListeners()}},z={timestamp:0,increment:1,offset:0,refTs:performance.now(),timer:0,updateDelay:67,isRunning:!1,start(){clearTimeout(this.timer),this.refTs=performance.now(),this.isRunning=!0,this.next()},stop(){clearTimeout(this.timer),this.isRunning=!1,this.count(),this.offset=this.timestamp},reset(e=0){this.offset=e,this.timestamp=e,this.refTs=performance.now()},changeIncrement(e=0){const t=e||-this.increment,n=this.isRunning;n&&this.stop(),this.increment=t,n&&this.start()},count(){const e=performance.now(),t=e-this.refTs;this.timestamp=this.offset+this.increment*t},next(){this.count(),this.timer=setTimeout(()=>this.next(),this.updateDelay)}},B=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"digital-timer"},[e._v(" "+e._s(e.timerString)+" ")])},q=[];const H=[{name:"ms",fullName:"milliseconds",max:1e3,tag:"L"},{name:"s",fullName:"seconds",max:60,tag:"S"},{name:"min",fullName:"minutes",max:60,tag:"M"},{name:"h",fullName:"hours",max:24,tag:"H"},{name:"d",fullName:"days",max:1/0,tag:"D"}];function J(e){if(!e||"string"!==typeof e)return!1;const t=/^(?:(?:\\.|[^{])*(?:\{([DHMSL])\1*\})?)+$/;return t.test(e)}var U={computed:{isNegative(){return this.value<0},splitted(){const e=this.timeFormat,t=e.split(/((?:\\.|[^{])*)(\{[^}]+\})/g);return t.reduce((e,t)=>{if(t.startsWith("{")){const n=t.charAt(1),i=H.findIndex(e=>e.tag===n),a=H[i],s=a.name;e.push({tag:n,nb:t.length-2,name:s,fullName:a.fullName})}else t&&e.push(t.replace(/\\(.)/g,"$1"));return e},[])},maxUnit(){const e=this.splitted;let t=0;return e.forEach(e=>{if("object"===typeof e){const n=H.findIndex(t=>t.tag===e.tag);t=Math.max(t,n)}}),t}},methods:{update(){let e=Math.floor(Math.abs(this.value));const t=this.maxUnit,n={};let i=0;while(i<t){const t=H[i],a=t.max,s=e%a;e=(e-s)/a,n[t.name]=s,i++}n[H[i].name]=e,this.values=Object.assign({ms:0,s:0,min:0,h:0,d:0},n)}},watch:{value(){this.update()}},created(){this.update()}};var G={name:"DigitalTimer",props:{value:{type:Number,required:!0},timeFormat:{type:String,resquired:!0}},mixins:[U],data:()=>({values:{ms:0,s:0,min:0,h:0,d:0}}),computed:{timerString(){const e=this.values,t=this.splitted.map(t=>{if("object"===typeof t){const n=e[t.name];return this.pad(n,t.nb)}return t}).join("");return this.isNegative?"-"+t:t}},methods:{pad(e,t){let n=e.toString(10);const i=n.length;if(i<t){const e=new Array(t-i).fill("0").join("");return e+n}return n}}},W=G,Q=(n("c897"),n("7190"),Object(f["a"])(W,B,q,!1,null,"4c08d6fc",null)),X=Q.exports,Y={name:"Chronometer",mixins:[D,M],data:()=>({chrono:z,currentFormat:v,color:"black",presets:m}),computed:{mainActionName(){return this.isCounting?"Pause":"Play"},mainActionIcon(){return this.isCounting?"⏸":"▶"},isCounting(){return this.chrono.isRunning}},methods:{mainAction(){const e=this.isCounting;e?this.stop():this.start()},start(){const e=this.isCounting;this.chrono.start(),e||this.trigger("start")},stop(){const e=this.isCounting;this.chrono.stop(),e&&this.trigger("stop")},reset(){this.stop(),this.actionReset()},record(){console.log("TODO record",z.timestamp)},init(){this.currentFormat=v,this.reset()}},watch:{"presets.activePreset":function(){this.init()}},created(){w.removeSound(-1,!0),this.init()},components:{DigitalTimer:X}},Z=Y,ee=(n("38d6"),Object(f["a"])(Z,_,S,!1,null,"1ac52da6",null)),te=ee.exports,ne=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"page"},[n("h2",[e._v("Shortcut settings")]),n("div",{staticClass:"keys-display"},[n("div",{staticClass:"keys-display__header"},[e._v(" Action when chronometer is sleeping ")]),n("div",{staticClass:"keys-display__header"},[e._v(" Key ")]),e._l(e.sleeping,(function(t){return[n("div",{key:"action"+t,staticClass:"action-name",on:{click:function(){return e.onclick(t)}}},[e._v(" "+e._s(e.info[t])+" ")]),n("div",{key:"bind"+t,staticClass:"key-binding",class:{"is-binding":e.record===t},on:{click:function(){return e.onclick(t)}}},[e._v(" "+e._s(e.record===t?"Press key to bind...":e.binding[t])+" ")])]}))],2),n("div",{staticClass:"keys-display"},[n("div",{staticClass:"keys-display__header"},[e._v(" Action when chronometer is running ")]),n("div",{staticClass:"keys-display__header"},[e._v(" Key ")]),e._l(e.running,(function(t){return[n("div",{key:"action"+t,staticClass:"action-name",on:{click:function(){return e.onclick(t)}}},[e._v(" "+e._s(e.info[t])+" ")]),n("div",{key:"bind"+t,staticClass:"key-binding",class:{"is-binding":e.record===t},on:{click:function(){return e.onclick(t)}}},[e._v(" "+e._s(e.record===t?"Press key to bind...":e.binding[t])+" ")])]}))],2),n("div",{staticClass:"keys-display"},[n("div",{staticClass:"keys-display__header"},[e._v(" Other actions ")]),n("div",{staticClass:"keys-display__header"},[e._v(" Key ")]),e._l(e.always,(function(t){return[n("div",{key:"action"+t,staticClass:"action-name",on:{click:function(){return e.onclick(t)}}},[e._v(" "+e._s(e.info[t])+" ")]),n("div",{key:"bind"+t,staticClass:"key-binding",class:{"is-binding":e.record===t},on:{click:function(){return e.onclick(t)}}},[e._v(" "+e._s(e.record===t?"Press key to bind...":e.binding[t])+" ")])]}))],2)])},ie=[],ae={name:"ShortcutSettings",data:()=>({binding:Object.assign({},K),record:null,info:$,sleeping:j,running:R,always:I}),computed:{listenerKey(){return this.bindKey.bind(this)}},methods:{bindKey(e){const t=e.code;if(t){const n=this.record;V(n,t),this.binding[n]=t,e.preventDefault(),e.stopPropagation()}this.removeListeners()},registerKey(e){this.record||(this.record=e,document.body.addEventListener("keydown",this.listenerKey))},removeListeners(){document.body.removeEventListener("keydown",this.listenerKey),this.record=null},onclick(e){this.record===e?this.removeListeners():this.registerKey(e)}},destroyed(){this.removeListeners()}},se=ae,re=(n("9c4d"),Object(f["a"])(se,ne,ie,!1,null,"353ae278",null)),oe=re.exports,ce=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"page"},[n("h2",[e._v("Timer settings")]),n("div",{staticClass:"init-settings"}),e._l(e.activeFormat.events,(function(t){return n("section",{key:t.id,staticClass:"event-section"},[n("header",{staticClass:"header-event"},["init"!==t.id?n("button",{staticClass:"remove-event-btn",attrs:{title:"Remove this event"},on:{click:function(n){return n.preventDefault(),n.stopPropagation(),e.removeEvent(t)}}},[e._v(" ✖ ")]):e._e()]),n("label",{staticClass:"event-label"},[n("span",[e._v("Name:")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"event.name"}],attrs:{type:"text"},domProps:{value:t.name},on:{input:function(n){n.target.composing||e.$set(t,"name",n.target.value)}}})]),n("label",{staticClass:"event-label"},[n("span",[e._v("Trigger on:")]),n("select",{directives:[{name:"model",rawName:"v-model",value:t.trigger,expression:"event.trigger"}],attrs:{disabled:"init"===t.id},on:{change:[function(n){var i=Array.prototype.filter.call(n.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(t,"trigger",n.target.multiple?i:i[0])},function(n){return e.eventInit(t)}]}},[e._m(0,!0),n("option",{attrs:{value:"reach"}},[e._v(" when timer reach a time value ")]),n("option",{attrs:{value:"start"}},[e._v(" when timer starts ")]),n("option",{attrs:{value:"stop"}},[e._v(" when timer stops ")]),n("option",{attrs:{value:"reset"}},[e._v(" when timer is reset ")]),n("option",{attrs:{value:"Special1"}},[e._v(" when shortcut Special 1 is triggered ")]),n("option",{attrs:{value:"Special2"}},[e._v(" when shortcut Special 2 is triggered ")]),n("option",{attrs:{value:"Special3"}},[e._v(" when shortcut Special 3 is triggered ")]),n("option",{attrs:{value:"Special4"}},[e._v(" when shortcut Special 4 is triggered ")]),n("option",{attrs:{value:"Special5"}},[e._v(" when shortcut Special 5 is triggered ")])])]),n("label",{staticClass:"event-label"},[n("span"),["reach"===t.trigger?n("DigitalTimerEditor",{attrs:{timeFormat:e.activeFormat.display},model:{value:t.triggerValue,callback:function(n){e.$set(t,"triggerValue",n)},expression:"event.triggerValue"}}):e._e()]],2),n("div",{staticClass:"action-group-section"},[e._v(" Actions: "),e._l(t.actions,(function(i,a){return n("div",{key:"action-of-"+t.id+"-"+a,staticClass:"action-section"},[n("label",[n("select",{directives:[{name:"model",rawName:"v-model",value:i.action,expression:"action.action"}],attrs:{disabled:"init"===t.id&&a<e.nbInitFrozen},on:{change:[function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(i,"action",t.target.multiple?n:n[0])},function(t){return e.actionInit(i)}]}},[e._m(1,!0),n("option",{attrs:{value:"color"}},[e._v(" Change timer color ")]),n("option",{attrs:{value:"sound"}},[e._v(" Play a sound ")]),n("option",{attrs:{value:"increment"}},[e._v(" Change counting direction ")]),n("option",{attrs:{value:"start"}},[e._v(" Start sleeping timer ")]),n("option",{attrs:{value:"stop"}},[e._v(" Stop running timer ")]),n("option",{attrs:{value:"set"}},[e._v(" Set a value timer ")]),n("option",{attrs:{value:"addTime"}},[e._v(" Add time ")]),n("option",{attrs:{value:"format"}},[e._v(" Set timer format display ")]),n("option",{attrs:{value:"enable"}},[e._v(" Enable an event ")]),n("option",{attrs:{value:"disable"}},[e._v(" Disable an event ")]),n("option",{attrs:{value:"runEvent"}},[e._v(" Run an event ")])]),["color"===i.action?n("span",[n("input",{directives:[{name:"model",rawName:"v-model",value:i.value,expression:"action.value"}],attrs:{type:"color"},domProps:{value:i.value},on:{input:function(t){t.target.composing||e.$set(i,"value",t.target.value)}}})]):["set","addTime"].includes(i.action)?n("span",[n("DigitalTimerEditor",{attrs:{timeFormat:e.activeFormat.display},model:{value:i.value,callback:function(t){e.$set(i,"value",t)},expression:"action.value"}})],1):"increment"===i.action?n("span",[n("select",{directives:[{name:"model",rawName:"v-model",value:i.value,expression:"action.value"}],on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(i,"value",t.target.multiple?n:n[0])}}},[n("option",{domProps:{value:0}},[e._v(" Toggle direction ")]),n("option",{domProps:{value:1}},[e._v(" Set to increment ")]),n("option",{domProps:{value:-1}},[e._v(" Set to decrement ")])])]):["enable","disable","runEvent"].includes(i.action)?n("span",[n("select",{directives:[{name:"model",rawName:"v-model",value:i.value,expression:"action.value"}],on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(i,"value",t.target.multiple?n:n[0])}}},[n("option",{attrs:{value:""}},[e._v(" This event ")]),n("option",{attrs:{value:"*"}},[e._v(" All events ")]),n("hr"),e._l(e.events,(function(t){return n("option",{key:"option-in-"+t.id+"-"+a+"-"+t.id,domProps:{value:t.id}},[e._v(" "+e._s(t.name)+" ")])}))],2)]):"format"===i.action?n("span",[n("UpdateTimeFormat",{on:{input:function(n){return e.formatChanged(i,t)}},model:{value:i.value,callback:function(t){e.$set(i,"value",t)},expression:"action.value"}})],1):"sound"===i.action?n("span",[n("SoundSelector",{model:{value:i.value,callback:function(t){e.$set(i,"value",t)},expression:"action.value"}})],1):e._e()]],2),"init"===t.id&&a<e.nbInitFrozen?e._e():n("button",{staticClass:"remove-action-buton",attrs:{title:"Remove this action"},on:{click:function(n){return n.preventDefault(),n.stopPropagation(),e.removeAction(t,i)}}},[e._v(" ✖ ")])])})),n("footer",[n("button",{staticClass:"add-btn",attrs:{title:"Add an action in this event"},on:{click:function(n){return n.preventDefault(),n.stopPropagation(),e.addAction(t)}}},[e._v(" ➕ Add an action ")])])],2),n("aside",{staticClass:"information-message"},["init"===t.id?n("p",[e._v(" This event cannot be disabled nor deleted. ")]):e._e()])])})),n("footer",[n("button",{staticClass:"add-btn",on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.addEvent(t)}}},[e._v(" ➕ Add an event ")])]),n("footer",[n("button",{staticClass:"save-preset",on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.saveConfig(t)}}},[e._v(" 💾 Save this configuration ")])]),n("aside",[n("ConfirmDialog",{attrs:{open:e.saveDialog},on:{cancel:function(t){e.saveDialog=!1},ok:e.savePreset}},[n("section",[e.presetList.length>0?n("p",[e._v(" Override an existing preset: "),n("select",{directives:[{name:"model",rawName:"v-model",value:e.presetId,expression:"presetId"}],on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.presetId=t.target.multiple?n:n[0]}}},[n("option",{attrs:{value:""}},[e._v(" New preset ")]),n("hr"),e._l(e.presetList,(function(t){return n("option",{key:"option-"+t.id,domProps:{value:t.id}},[e._v(" "+e._s(t.name)+" ")])}))],2)]):e._e(),n("p",{staticClass:"choose-preset-name"},[n("label",[e._v("Choose a preset name")]),n("br"),n("input",{directives:[{name:"model",rawName:"v-model",value:e.presetName,expression:"presetName"}],attrs:{placeholder:"Choose a name",type:"text"},domProps:{value:e.presetName},on:{input:function(t){t.target.composing||(e.presetName=t.target.value)}}})])])])],1)],2)},le=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("option",{attrs:{disabled:"",value:"never"}},[n("i",[e._v("Select what triggers this event")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("option",{attrs:{value:"none",disabled:""}},[n("i",[e._v("Choose an action")])])}],ue=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"digital-timer-editor",class:{hasError:e.hasError}},[n("span",{staticClass:"time-sign",on:{click:function(t){t.preventDefault(),t.stopPropagation(),e.negativeSign=!e.negativeSign}}},[e._v(" "+e._s(e.negativeSign?"➖":"➕")+" ")]),e._l(e.splitted,(function(t,i){return["object"===typeof t?n("input",{directives:[{name:"model",rawName:"v-model",value:e.values[t.name],expression:"values[chunk.name]"}],key:"digital-editor-input-"+i,attrs:{type:"number",min:"0",size:"2",title:t.fullName},domProps:{value:e.values[t.name]},on:{input:function(n){n.target.composing||e.$set(e.values,t.name,n.target.value)}}}):n("span",{key:"digital-editor-span-"+i},[e._v(" "+e._s(t)+" ")])]}))],2)},de=[],pe={name:"DigitalTimerEditor",props:{value:{type:Number,required:!0},timeFormat:{type:String,resquired:!0}},mixins:[U],data(){return{values:{ms:0,s:0,min:0,h:0,d:0},hasError:!1,negativeSign:this.value<0}},computed:{generateTs(){const e=this.values;let t=1;const n=H.reduce((n,i,a)=>(t*=(H[a-1]||{max:1}).max,n+e[i.name]*t),0);return this.negativeSign?-n:n}},methods:{pad(e,t){let n=e.toString(10);const i=n.length;if(i<t){const e=new Array(t-i).fill("0").join("");return e+n}return n},send(){const e=this.generateTs;Number.isFinite(e)?(this.hasError=!1,this.$emit("input",e)):this.hasError=!0}},watch:{isNegative(){this.negativeSign=this.isNegative},"values.ms":function(){this.send()},"values.s":function(){this.send()},"values.min":function(){this.send()},"values.h":function(){this.send()},"values.d":function(){this.send()}}},ve=pe,me=(n("3e2d"),Object(f["a"])(ve,ue,de,!1,null,"27117e40",null)),he=me.exports,ge=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.internalOpen?n("div",{staticClass:"mask",on:{click:function(t){return t.target!==t.currentTarget?null:(t.preventDefault(),t.stopPropagation(),e.cancel(t))}}},[n("dialog",{staticClass:"confirm-dialog",attrs:{open:e.internalOpen}},[n("div",{staticClass:"content"},[e._t("default")],2),n("footer",{staticClass:"dialog-footer"},[n("button",{staticClass:"cancel-btn",on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.cancel(t)}}},[e._v(" Cancel ")]),n("button",{staticClass:"Approve-btn",on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.approve(t)}}},[e._v(" Ok ")])])])]):e._e()},fe=[],be={name:"ConfirmDialog",props:{open:{type:Boolean,default:!1}},data(){return{internalOpen:this.open}},methods:{cancel(){this.internalOpen=!1,this.$emit("cancel")},approve(){this.internalOpen=!1,this.$emit("ok")},actionKey(e){const t=e.code;switch(t){case"Enter":this.approve();break;case"Escape":this.cancel();break;default:return}e.preventDefault(),e.stopPropagation()},addListeners(){document.body.addEventListener("keydown",this.actionKey,!0)},removeListeners(){document.body.removeEventListener("keydown",this.actionKey,!0)}},watch:{open(){this.internalOpen=this.open},internalOpen(){this.internalOpen?this.addListeners():this.removeListeners()}},created(){this.internalOpen&&this.addListeners()},destroyed(){this.removeListeners()}},ye=be,_e=(n("dc59"),Object(f["a"])(ye,ge,fe,!1,null,"07f1bc9d",null)),Se=_e.exports,ke=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("span",{staticClass:"time-format-output",on:{click:function(t){e.open=!0}}},[e._v(" "+e._s(e.value)+" ")]),n("ConfirmDialog",{attrs:{open:e.open},on:{ok:e.confirm,cancel:function(t){e.open=!1,e.formatStr=e.value}}},[n("label",{staticClass:"main-field"},[e._v(" Display format: "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.formatStr,expression:"formatStr"}],class:{hasError:!e.isValid},attrs:{type:"text"},domProps:{value:e.formatStr},on:{input:function(t){t.target.composing||(e.formatStr=t.target.value)}}})]),n("fieldset",[n("legend",[e._v("Output example")]),n("label",[e._v("time value (ms): "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.exampleValue,expression:"exampleValue"}],attrs:{type:"number"},domProps:{value:e.exampleValue},on:{input:function(t){t.target.composing||(e.exampleValue=t.target.value)}}})]),n("DigitalTimer",{attrs:{value:e.exampleValue,timeFormat:e.isValid?e.formatStr:"--format error--"}})],1)])],1)},Ce=[],Ee={name:"UpdateTimeFormat",props:{value:{type:String,required:!0}},data(){return{open:!1,formatStr:this.value,exampleValue:195905012}},computed:{isValid(){return J(this.formatStr)}},methods:{confirm(){this.isValid?(this.open=!1,this.$emit("input",this.formatStr)):(this.open=!1,setTimeout(()=>{this.open=!0},10))}},watch:{value(){this.formatStr=this.value}},components:{ConfirmDialog:Se,DigitalTimer:X}},Pe=Ee,we=(n("1d8c"),Object(f["a"])(Pe,ke,Ce,!1,null,"1095e982",null)),xe=we.exports,Te=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"sound-selector"},[n("select",{directives:[{name:"model",rawName:"v-model",value:e.internalValue,expression:"internalValue"}],on:{change:[function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.internalValue=t.target.multiple?n:n[0]},function(t){return e.$emit("input",e.internalValue)}]}},[n("option",{attrs:{value:"",disabled:""}},[e._v(" Choose a sound ")]),e._l(e.soundList,(function(t){return n("option",{key:"sound--"+t.id,domProps:{value:t.id}},[e._v(" "+e._s(t.desc)+" ")])}))],2),-1===e.playId?n("button",{attrs:{disabled:""===e.internalValue},on:{click:e.play}},[e._v(" ▶ ")]):n("button",{on:{click:e.stop}},[e._v(" ⏹ ")])])},Ne=[],Oe={name:"SoundSelector",props:{value:{type:String,required:!0}},data(){return{soundList:P,internalValue:this.value,playId:-1}},computed:{},methods:{play(){const e=this.internalValue;e&&(-1!==this.playId&&this.stop(),this.playId=w.playSound(e,()=>this.playId=-1))},stop(){const e=this.playId;-1!==e&&(w.removeSound(e),this.playId=-1)}},watch:{value:function(){this.internalValue=this.value}}},Ae=Oe,De=(n("b476"),Object(f["a"])(Ae,Te,Ne,!1,null,"366f0102",null)),Fe=De.exports,Le={name:"TimerSettings",data:()=>({activeFormat:v,nbInitFrozen:3,saveDialog:!1,presets:m,presetId:m.activePreset||"",presetName:(m.getPreset(m.activePreset)||{name:""}).name}),computed:{events(){return this.activeFormat.events},presetList(){return this.presets.data}},methods:{addEvent(){const e=this.activeFormat.events,t=this.newEventId(),n={id:t,name:t,trigger:"never",triggerValue:null,enabled:!0,actions:[]};this.addAction(n),e.push(n)},addAction(e){const t={action:"none",value:""};e.actions.push(t)},removeEvent(e){const t=this.activeFormat.events,n=t.indexOf(e);-1!==n&&t.splice(n,1)},removeAction(e,t){const n=e.actions,i=n.indexOf(t);-1!==i&&n.splice(i,1)},newEventId(){const e=this.events;let t,n=e.length;do{t=`event ${n++}`}while(e.some(e=>e.id===t));return t},saveConfig(){this.saveDialog=!0},savePreset(){this.saveDialog=!1;const e={id:this.presetId,name:this.presetName,format:this.activeFormat},t=m.add(e);m.setActive(t)},eventInit(e){switch(e.trigger){case"reach":e.triggerValue=0;break;default:e.triggerValue=null}},actionInit(e){switch(e.action){case"color":e.value="black";break;case"increment":e.value=0;break;case"set":case"addTime":e.value=0;break;case"format":e.value=this.activeFormat.display;break;case"enable":case"disable":case"runEvent":e.value="";break;case"sound":e.value="";break;default:e.value=""}},formatChanged(e,t){"init"===t.id&&"format"===e.action&&(v.display=e.value)}},watch:{presetId(){this.presetName=(m.getPreset(this.presetId)||{name:""}).name}},components:{DigitalTimerEditor:he,UpdateTimeFormat:xe,SoundSelector:Fe,ConfirmDialog:Se}},$e=Le,Re=(n("ecfc"),Object(f["a"])($e,ce,le,!1,null,"49b31d00",null)),je=Re.exports,Ie=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"page"},[n("h2",[e._v("Presets management")]),n("div",{staticClass:"presets-display"},[n("div",{staticClass:"presets-display__header"},[e._v(" Preset name ")]),n("div",{staticClass:"presets-display__header"},[e._v(" Actions ")]),e._l(e.presetList,(function(t){return[n("div",{key:t.id,staticClass:"preset-name"},[e._v(" "+e._s(t.name)+" ")]),n("div",{key:"action-"+t.id,staticClass:"actions-area"},[n("button",{attrs:{title:"Edit name of this preset"},on:{click:function(n){e.editNamePreset=t,e.presetName=t.name}}},[e._v(" 📝 ")]),n("button",{attrs:{title:"Delete this preset"},on:{click:function(n){e.deletedPreset=t}}},[e._v(" 🗑 ")])])]}))],2),n("ConfirmDialog",{attrs:{open:null!==e.editNamePreset},on:{cancel:function(t){e.editNamePreset=null},ok:e.editName}},[n("label",[e._v(" New Name: "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.presetName,expression:"presetName"}],attrs:{type:"text"},domProps:{value:e.presetName},on:{input:function(t){t.target.composing||(e.presetName=t.target.value)}}})])]),n("ConfirmDialog",{attrs:{open:null!==e.deletedPreset},on:{cancel:function(t){e.deletedPreset=null},ok:e.deletePreset}},[e._v(' Do you want to delete the preset "'+e._s(e.deletedPreset&&e.deletedPreset.name)+'"? ')])],1)},Ve=[],Ke={name:"PresetMngt",data:()=>({currentFormat:v,presets:m,editNamePreset:null,presetName:"",deletedPreset:null}),computed:{presetList(){return this.presets.data}},methods:{editName(){this.editNamePreset.name=this.presetName,this.presets.add(this.editNamePreset),this.editNamePreset=null},deletePreset(){this.presets.remove(this.deletedPreset),this.deletedPreset=null}},watch:{},components:{ConfirmDialog:Se}},Me=Ke,ze=(n("c8f4"),Object(f["a"])(Me,Ie,Ve,!1,null,"39ece030",null)),Be=ze.exports,qe={name:"App",data:()=>({activePage:"Chronometer"}),components:{Menu:y,Chronometer:te,ShortcutSettings:oe,TimerSettings:je,PresetMngt:Be,Sound:O}},He=qe,Je=(n("2655"),n("b0a0"),Object(f["a"])(He,a,s,!1,null,"5bbeca6e",null)),Ue=Je.exports;i["a"].config.productionTip=!1,new i["a"]({render:function(e){return e(Ue)}}).$mount("#app")},"6d93":function(e,t,n){},7190:function(e,t,n){"use strict";var i=n("bf02"),a=n.n(i);a.a},"77dc":function(e,t,n){},"8bc1":function(e,t,n){},"9c4d":function(e,t,n){"use strict";var i=n("415c"),a=n.n(i);a.a},b0a0:function(e,t,n){"use strict";var i=n("452c"),a=n.n(i);a.a},b476:function(e,t,n){"use strict";var i=n("e7ef"),a=n.n(i);a.a},bf02:function(e,t,n){},c524:function(e,t,n){"use strict";var i=n("df2a"),a=n.n(i);a.a},c897:function(e,t,n){"use strict";var i=n("6d93"),a=n.n(i);a.a},c8f4:function(e,t,n){"use strict";var i=n("8bc1"),a=n.n(i);a.a},d550:function(e,t,n){},dc59:function(e,t,n){"use strict";var i=n("d550"),a=n.n(i);a.a},dd7d:function(e,t,n){},df2a:function(e,t,n){},df98:function(e,t,n){},e7ef:function(e,t,n){},ecfc:function(e,t,n){"use strict";var i=n("1454"),a=n.n(i);a.a},ed7c:function(e,t,n){},f9e8:function(e,t,n){"use strict";var i=n("dd7d"),a=n.n(i);a.a}});
//# sourceMappingURL=app.da879aa6.js.map